var AllCakesComponent=function(r){var s,c=r("body").find(".all-cakes-component"),d=r("#allCakesTemplate"),p=0,e=function(){return"undefined"!=typeof Sitecore&&!!(Sitecore&&Sitecore.PageModes&&Sitecore.PageModes.PageEditor)};function n(){r("body").find(".menu-card-component").each(function(){var e=r(this).find(".menu-card-descriptor").text();e.toLowerCase().indexOf("serves")&&(e=e.replace("-"," to ")),r(this).attr("aria-label",r(this).find(".menu-card-title").text()+" "+r(this).find(".menu-card-description").text()+" "+e)})}function t(e){for(var n='<div class="twelve-column row flex-row">',t=!1,o=p;o<p+e&&o<s.length;o++){t=!0;var a=d.html(),i="";null!==s[o].FlagClass&&(i='<span class="menu-card-flag '+s[o].FlagClass+'"></span>'),a=a.replace(/{{title}}/g,s[o].Title).replace(/{{img}}/g,s[o].CardFeaturedImageSrc).replace(/{{copy}}/g,s[o].Subtitle).replace(/{{descriptor}}/g,s[o].ServingRange).replace(/{{flag_theme}}/g,i).replace(/{{href}}/g,s[o].Url),o%3==0&&o!==p&&(n+='</div><div class="twelve-column row equal-height flex-row">'),n+=a}n+="</div>",t&&c.html(c.html()+n),$pendingItems=c.find(".menu-card-wrapper.pending");var l=0;$pendingItems.each(function(){r(this).css("display",""),r(this).find("img").on("load",function(){r(this).closest(".menu-card-wrapper").css("opacity","1"),++l==$pendingItems.length&&c.removeClass("loading")})}),p=o}return{init:function(){c.length&&(r(window).scroll(function(){console.log("%%%%%%%%% scroll in all cakes",window.noPopulateCakes),r(window).scrollTop()>c.offset().top+c.outerHeight()-r(window).height()/1.4&&(e()||!1!==window.noPopulateCakes||(t(9),n()))}),c.addClass("loading"),s=cakeMenuItemsJSON,e()||!1!==window.noPopulateCakes||(t(9),n()))}}}(jQuery);$(window).on("load",function(){AllCakesComponent.init()});